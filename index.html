<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">

    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta name="description" content="Xenon Boostrap Admin Panel" />
    <meta name="author" content="" />

    <title>易企卖运营后台</title>

    <!--<link rel="stylesheet" href="http://fonts.useso.com/css?family=Arimo:400,700,400italic">-->
    <link rel="stylesheet" href="assets/css/fonts/linecons/css/linecons.css">
    <link rel="stylesheet" href="assets/css/fonts/fontawesome/css/font-awesome.min.css">
    <link rel="stylesheet" href="css/bootstrap-3.3.0.css">
    <link rel="stylesheet" href="assets/css/xenon-core.css">
    <link rel="stylesheet" href="assets/css/xenon-forms.css">
    <link rel="stylesheet" href="assets/css/xenon-components.css">
    <link rel="stylesheet" href="assets/css/xenon-skins.css">
    <link rel="stylesheet" href="assets/css/custom.css">

    <script src="js/jquery-1.12.4.js"></script>
    <script src="js/bootstrap-3.3.0.js"></script>

    <script src="js/angular-1.2.32.js"></script>
    <script src="js/angular-ui-router.js"></script>
    <script src="js/ui-bootstrap-0.12.0.js"></script>
    <script src="js/ui-bootstrap-tpls-0.12.0.js"></script>

    <script>
        var operApp = angular.module("operApp",["ui.router", "ui.bootstrap"]);
        operApp.config(["$stateProvider", "$urlRouterProvider", function ($stateProvider, $urlRouterProvider) {
            $urlRouterProvider.otherwise("/index");
            //首页
            $stateProvider.state("index",{
                url:"/index",
                templateUrl: "template/index.html",
                data: {
                    title: "首页",
                    subTitle: ""
                }
            });
            //系统管理
            $stateProvider.state("roleOperating", {
                url:"/roleOperating",
                templateUrl: "template/roleOperating.html",
                data: {
                    title: "系统管理",
                    subTitle: "角色管理"
                }
            }).state("addAccount",{
                url:"/addAccount",
                templateUrl: "template/addAccount.html",
                data: {
                    title: "系统管理",
                    subTitle: "添加账号"
                }
            }).state("systemAccountList",{
                url:"/systemAccountList",
                templateUrl: "template/systemAccountList.html",
                data: {
                    title: "系统管理",
                    subTitle: "系统账号"
                }
            }).state("authorityManagement",{
                url: "/authorityManagement/:roleId",
                templateUrl: "template/authorityManagement.html",
                data: {
                    title: "系统管理",
                    subTitle: "权限管理"
                }
            });

            //会员管理
            $stateProvider.state("memberList", {
                url:"/memberList",
                templateUrl: "template/memberList.html",
                data: {
                    title: "会员管理",
                    subTitle: "会员列表"
                }
            }).state("memberDetail", {
                url:"/memberDetail/:id",
                templateUrl: "template/memberDetail.html",
                data: {
                    title: "会员管理",
                    subTitle: "会员详情"
                }
            }).state("getPhoneNumbers", {
                url:"/getPhoneNumbers",
                templateUrl: "template/getPhoneNumbers.html",
                data: {
                    title: "会员管理",
                    subTitle: "获取手机号"
                }
            });

            //订单管理
            $stateProvider.state("orderList", {
                url:"/orderList",
                templateUrl: "template/orderList.html",
                data: {
                    title: "订单管理",
                    subTitle: "订单列表"
                }
            }).state("createSandBoxOrder", {
                url:"/createSandBoxOrder",
                templateUrl: "template/createSandBoxOrder.html",
                data: {
                    title: "订单管理",
                    subTitle: "生成沙箱订单"
                }
            }).state("orderDetails",{
                url:"/orderDetails/:memberId",
                templateUrl:"template/orderDetails.html",
                data:{
                    title:"订单管理 > 订单列表",
                    subTitle:"订单详情"
                }
            }).state("applicationForPayment",{
                url:"/applicationForPayment/:orderNum",
                templateUrl:"template/applicationForPayment.html",
                data:{
                    title:"订单管理  >  订单列表  >  订单详情",
                    subTitle:"已支付申请"
                }
            });

            //产品管理
            $stateProvider.state("productPackage", {
                url:"/productPackage",
                templateUrl:"template/productPackage.html",
                data:{
                    title:"产品管理",
                    subTitle:"产品套餐列表"
                }
            }).state("addProductPackage",{
                url:"/addProductPackage/:productPackageNum",
                templateUrl:"template/addProductPackage.html",
                data:{
                    title:"产品管理",
                    subTitle:"添加套餐包"
                }
            }).state("productPackageDetails",{
                url:"/productPackageDetails/:productPackageNum",
                templateUrl:"template/productPackageDetails.html",
                data:{
                    title:"产品管理 > 产品套餐列表",
                    subTitle:"套餐详情"
                }
            }).state("meteringProduct",{
                url:"/meteringProduct",
                templateUrl:"template/meteringProduct.html",
                data:{
                    title:"产品管理 > 技术产品",
                    subTitle:"计量产品"
                }
            }).state("techniqueProduct",{
                url:"/techniqueProduct",
                templateUrl:"template/techniqueProduct.html",
                data:{
                    title:"产品管理",
                    subTitle:"技术产品"
                }
            });
            //日志管理  @liqin
            $stateProvider.state("loginLog", {
                url:"/loginLog",
                templateUrl: "template/loginLog.html",
                data: {
                    title: "日志管理",
                    subTitle: "登录日志"
                }
            }).state("operationLog", {
                url:"/operationLog",
                templateUrl: "template/operationLog.html",
                data: {
                    title: "日志管理",
                    subTitle: "操作日志"
                }
            });
            //日志管理结束

        }]);
//        operApp.controller("MainController",["$scope","MenuService", function ($scope, MenuService) {
//            MenuService.getMenuList().then(function(menuData){
//                console.log(menuData);
//                $scope.menuData = menuData;
//            });
//
//            $scope.pageData = {
//                title: "首页",
//                subTitle: ""
//            };
//
//            $scope.goToPage = function (parentIndex, index) {
//                var par = $scope.menuData[parentIndex];
//                $scope.pageData.title = par.name;
//                var child = par.items[index];
//                $scope.pageData.subTitle = child.name;
//            };
//
//            $scope.$on("$stateChangeStart",function(event,toState,toParams,fromState,fromParams){
//                //更换右侧标题和副标题
//                $scope.pageData.title=toState.data.title;
//                $scope.pageData.subTitle=toState.data.subTitle;
//            });
//        }]);
        operApp.controller("MainController",["$scope","$rootScope","MenuService", function ($scope, $rootScope, MenuService) {
            MenuService.getMenuList().then(function(menuData){
                $scope.menuData = menuData;
            });

            $scope.pageData = {
                title: "首页",
                subTitle: ""
            };

            $scope.goToPage = function (parentIndex, index) {
                var par = $scope.menuData[parentIndex];
                $scope.pageData.title = par.name;
                var child = par.items[index];
                $scope.pageData.subTitle = child.name;
            };

            $scope.$on("$stateChangeStart",function(event,toState,toParams,fromState,fromParams){
                //更换右侧标题和副标题
                $scope.pageData.title=toState.data.title;
                $scope.pageData.subTitle=toState.data.subTitle;
            });

            $rootScope.inputBlurFn = function (vali, err, fn) {
                if(err){
                    for(var attr in err){
                        if(err[attr]==true){
                            vali.promptAttr = attr;
                            return false;
                        }
                    }
                }
                //两次密码输入不一致
                var selfRes = true;
                if(fn){
                    selfRes = fn();
                }
                if(selfRes === false){
                    return false;
                }
                vali.promptAttr = "_pass";
                return true;
            };

            $rootScope.focusFn = function (validateList) {
                validateList.eleType = "password";
            };
        }]);
    </script>
    <!--过滤器-->
    <script src="js/CommonFilter.js"></script>
    <!--服务-->
    <script src="js/service/IndexService.js"></script>
    <script src="js/service/ToolService.js"></script>
    <script src="js/service/LocalStorageService.js"></script>
    <script src="js/service/CommonService.js"></script>
    <script src="js/service/InitService.js"></script>
    <script src="js/service/MsService.js"></script>
    <script src="js/service/RoleService.js"></script>
    <script src="js/service/MenuService.js"></script>
    <script src="js/service/orderService.js"></script>
    <script src="js/service/LogServer.js"></script>
    <script src="js/service/AccountService.js"></script>
    <script src="js/service/productService.js"></script>
    <!--控制器-->
    <script src="js/controller/IndexController.js"></script>
    <script src="js/controller/RoleOperatingController.js"></script>
    <script src="js/controller/SystemAccountListController.js"></script>
    <script src="js/controller/orderListController.js"></script>
    <script src="js/controller/OrderDetailsController.js"></script>
    <script src="js/controller/AddAcountController.js"></script>
    <script src="js/controller/AuthorityManagement.js"></script>
    <script src="js/controller/ApplicationForPayment.js"></script>
    <script src="js/controller/CreateSandBoxOrderController.js"></script>
    <script src="js/controller/ProductPackageController.js"></script>
    <script src="js/controller/AddProductPackageController.js"></script>
    <script src="js/controller/productPackageDetailsController.js"></script>
    <script src="js/controller/TechniqueProductController.js"></script>

    <script src="js/controller/loginLogController.js"></script>
    <script src="js/controller/operationLogController.js"></script>
    <script src="js/controller/MemberListController.js"></script>

    <!--指令-->
    <!--<script src="/js/directive/TableDirective.js"></script>-->
    <script src="js/directive/PromptBoxDirective.js"></script>
    <script src="js/directive/paginationDirective.js"></script>

    <style>
        a{ text-decoration: none !important;}
        input,select,textarea{ border-radius: 0 !important;}
        .il-par{ font-size: 0;}
        .il{ display: inline-block; font-size: 12px;}

        .ft12{ font-size: 12px;}
        .ft14{ font-size: 14px;}

        /* 系统管理 */
        .operate-platform-wrap{ background: #fff; min-height: 500px; padding: 10px 10px 10px 30px;}
        .operate-platform-wrap .current-page-title{ font-family: 黑体;}
        .operate-platform-wrap .cur-position{ line-height: 30px;}
        .prompt-info{ line-height: 30px;}

        .panel{ padding: 20px 30px 20px 0; border-radius: 0;}
        .panel .panel-heading{ border-bottom: none;}
        /*.panel .panel-body{ padding-top: 0;}*/

        .table > thead > tr > td, .table > tbody > tr > td, .table > tfoot > tr > td, .table > thead > tr > th, .table > tbody > tr > th, .table > tfoot > tr > th{ padding: 5px 15px;}
        .table .form-control{ height: 24px; padding: 0 12px;}

        .table .third-party{ width: 110px;}

        .sidebar-menu.fixed .sidebar-menu-inner{ position: static;}

        form[name="memberForm"] .form-group input{ width: 170px;}
    </style>
</head>
<body class="page-body skin-white" ng-app="operApp">
<div class="page-container" ng-controller="MainController">
    <div class="sidebar-menu toggle-others fixed">

        <div class="sidebar-menu-inner">

            <div class="logo-env">

                <!-- logo -->
                <div class="logo">
                    <a href="#/index" class="logo-expanded">
                        <img src="img/loginLogo.png" alt="" width="120" />
                    </a>
                </div>

                <!-- This will toggle the mobile menu and will be visible only on mobile devices -->
                <div class="mobile-menu-toggle visible-xs">
                    <a href="#" data-toggle="user-info-menu">
                        <i class="fa-bell-o"></i>
                        <span class="badge badge-success">7</span>
                    </a>

                    <a href="#" data-toggle="mobile-menu">
                        <i class="fa-bars"></i>
                    </a>
                </div>
            </div>
            <ul id="main-menu" class="main-menu">
                <!-- add class "multiple-expanded" to allow multiple submenus to open -->
                <!-- class "auto-inherit-active-class" will automatically add "active" class for parent elements who are marked already with class "active" -->
                <li class="opened" ng-repeat="menu in menuData track by $index">
                    <a href="javascript:;">
                        <i class="linecons-cog"></i>
                        <span class="title">{{menu.name}}</span>
                    </a>
                    <ul>
                        <li class="active" ng-repeat="item in menu.items">
                            <a href="#/{{item.hash}}" ng-click="goToPage($parent.$index,$index)">
                                <span class="title">{{item.name}}</span>
                            </a>
                        </li>
                    </ul>
                </li>
            </ul>

        </div>

    </div>

    <div class="main-content">
        <!-- User Info, Notifications and Menu Bar -->
        <div class="navbar user-info-navbar" role="navigation">
            <ul class="user-info-menu right-links list-inline list-unstyled">
                <li class="dropdown user-profile">
                    <a href="#">
                        <img src="assets/images/user-4.png" alt="user-image" class="img-circle img-inline userpic-32" width="28" />
                        <span>admin</span>
                    </a>
                </li>
                <li>
                    <a href="#" title="修改密码">
                        <i class="fa-edit"></i>
                    </a>
                </li>
                <li>
                    <a href="#" title="退出">
                        <i class="fa-lock"></i>
                    </a>
                </li>
            </ul>
        </div>
        <div class="operate-platform-wrap">
            <h3 class="current-page-title">{{pageData.subTitle}}</h3>
            <div class="cur-position il-par">
                <div class="position-txt il">当前位置：</div>
                <div class="title il">{{pageData.title}}</div>
                <div class="gt il">&nbsp;&gt;&nbsp;</div>
                <div class="sub-title il">{{pageData.subTitle}}</div>
            </div>
            <div class="ui-view"></div>
        </div>
    </div>
    <script type="text/ng-template" id="paginationTpl.html">
        <div>
            <div style="display: inline-block;vertical-align: 33px;margin-right: 10px;color: #666;">
                共<span>{{conf.total}}</span>条记录&nbsp;&nbsp;&nbsp;&nbsp;
                每页显示
                    <select class="form-control" style="display: inline-block;width: 56px;height: 30px;vertical-align: middle;padding: 6px;" name="role" ng-model="pageData" ng-options="item.txt for item in pagesStatusList"></select>
                <button class="btn btn-blue" style="background-color: #428bca;height: 30px;margin-bottom: 0px;line-height: 17px;" ng-click="getPageSize()" style="">确定</button>
            </div>
            <ul class="pagination">
                <li><a href="javascript:;" ng-click="prevPage()"><i class="fa-angle-left"></i></a></li>
                <li ng-repeat="item in pageList track by $index" ng-class="{active: item == conf.currentPage}" ng-click="changeCurrentPage(item)"><a href="javascript:;">{{item}}</a></li>
                <li><a href="javascript:;" ng-click="nextPage()"><i class="fa-angle-right"></i></a></li>
            </ul>
            <div style="display: inline-block;vertical-align: 33px;margin-left: 10px;color: #666">
                共<span>{{totalPages}}页&nbsp;&nbsp;&nbsp;&nbsp;</span>到第&nbsp;&nbsp;<input type="text" ng-model="page" style="height: 30px;width: 50px;border: 1px solid #ddd;padding-left: 5px"/>&nbsp;&nbsp;页
                <button class="btn btn-blue" style="background-color: #428bca;height: 30px;margin-bottom: 0px;line-height: 17px;" ng-click="goPage()" style="">确定</button>
            </div>
        </div>

    </script>

    <script type="text/ng-template" id="promptBoxBtnTpl.html">
        <a href="javascript:;" ng-if="params.btn.ele == 'a'" ng-class="params.btn.classes" ng-style="params.btnStyle" ng-click="open()">{{params.btn.txt}}</a>
        <button ng-if="params.btn.ele == 'btn'" ng-class="params.btn.classes" ng-style="params.btnStyle" ng-click="open()">{{params.btn.txt}}</button>
    </script>
    <script type="text/ng-template" id="promptBoxContentTpl.html">
        <div class="modal-header" style="border: none;">
            <h4 class="modal-title">{{params.popTitle}}</h4>
        </div>
        <div class="modal-body" style="text-align: center;">
            <ng-include src='bodyParams.templateUrl' ng-if="bodyParams.isUrl"></ng-include>
            <div ng-if="!bodyParams.isUrl" ng-bind-html="bodyParams.template"></div>
        </div>
        <div class="modal-footer" style="border: none;">
            <!--<button class="btn btn-info">确认</button>-->
            <!--<button class="btn btn-gray">取消</button>-->
            <button class="btn btn-{{btn.style}}" ng-repeat="btn in params.popBtns" ng-click="btnClick(btn);">{{btn.txt}}</button>
        </div>
    </script>
    <script type="text/ng-template" id="popBodyTpl.html">未传入模板</script>
</div>

</body>
</html>